var HUB,EmailRequlator=function(){},HubsConnection,createChart=function(n){var t,i,r,u,e,f;return t=new AmCharts.AmSerialChart,t.marginTop=0,t.autoMarginOffset=5,t.dataProvider=[],t.dataDateFormat="YYYY-MM-DD JJ:NN:SS",t.zoomOutButton={backgroundColor:"#000000",backgroundAlpha:.15},t.categoryField="date",i=t.categoryAxis,i.parseDates=!0,i.minPeriod="ss",i.dashLength=2,i.gridAlpha=.15,i.axisColor="#DADADA",r=new AmCharts.ValueAxis,r.axisColor="#FF6600",r.axisThickness=2,r.gridAlpha=0,t.addValueAxis(r),u=new AmCharts.ChartCursor,u.cursorPosition="mouse",t.addChartCursor(u),e=new AmCharts.ChartScrollbar,t.addChartScrollbar(e),f=new AmCharts.AmLegend,f.marginLeft=110,t.addLegend(f),t.write(n),{el:n,chart:t}},connections=function(){var n,t=$.ajax({type:"GET",url:"/wlt_Connections/getServerConnections",contentType:"application/json; charset=utf-8",async:!1}).done(function(t){n=JSON.parse(t)}).fail(function(){n=[]});return n};HubsConnection=connections();$.each(HubsConnection,function(n,t){var i=$.hubConnection(t.Connection),r=i.createHubProxy("ChatHub"),u,f;t.hub=r;u=Rx.Observable.fromEvent(r,"broadcastMessage",(n,t)=>{name:n,val:t});u.throttle(()=>Rx.Observable.interval(1e4)).subscribe(function(n){var i=JSON.parse(n.val),r;i.Connection_ID=t.conn_ID;r=$.ajax({type:"POST",data:JSON.stringify(i),url:"/wlt_ServerLogs/save",contentType:"application/json; charset=utf-8",processData:!0,cache:!1}).done(function(){console.log("Saved Successfully ")}).fail(function(){console.log("Success")})});console.log(u);f=function(){i.start().done(function(){var n=i.baseUrl,u={Client:location.protocol+window.location.hostname+(location.port?":"+location.port:""),RefreshRate:t.RefreshRate};r.invoke("send","name",JSON.stringify(u));console.log("Now connected, connection ID="+i.id);M.toast({html:"Connection established with :"+n,classes:"toast-success "})}).fail(function(n){var t=i.baseUrl;console.log("Could not connect",n);M.toast({html:"Connection could not be established with :"+t,classes:"toast-fail "})})};f();i.disconnected(function(){var n=i.baseUrl;M.toast({html:"Connection lost :"+n,classes:"toast-fail "});M.toast({html:"Attempting to reconnect to :"+n,classes:"toast-info "});setTimeout(function(){f()},5e3)});i.reconnecting(function(){var n=i.baseUrl;M.toast({html:"Reconnecting...",classes:"toast-info"})});i.reconnected(function(){var n=i.baseUrl;M.toast({html:"Reconnected  successfully to:"+n,classes:"toast-success "})})});